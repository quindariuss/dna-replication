<html>
<head>
<title>main.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #7a7e85;}
.s4 { color: #2aacb8;}
.s5 { color: #6aab73;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
main.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">pygame</span>
<span class="s0">import </span><span class="s1">random</span>
<span class="s0">from </span><span class="s1">os</span><span class="s2">.</span><span class="s1">path </span><span class="s0">import </span><span class="s1">join</span>

<span class="s1">pygame</span><span class="s2">.</span><span class="s1">init</span><span class="s2">()</span>

<span class="s3"># Constants</span>
<span class="s1">WIDTH</span><span class="s2">, </span><span class="s1">HEIGHT </span><span class="s2">= </span><span class="s4">800</span><span class="s2">, </span><span class="s4">600</span>
<span class="s1">FPS </span><span class="s2">= </span><span class="s4">60</span>

<span class="s3"># Station states</span>
<span class="s1">STARTUP_SCREEN </span><span class="s2">= </span><span class="s4">0</span>
<span class="s1">STATION_TEMPLATE </span><span class="s2">= </span><span class="s4">1</span>
<span class="s1">STATION_UNZIP </span><span class="s2">= </span><span class="s4">2</span>
<span class="s1">STATION_BUILD </span><span class="s2">= </span><span class="s4">3</span>
<span class="s1">STATION_DELIVERY </span><span class="s2">= </span><span class="s4">4</span>

<span class="s3"># Music</span>
<span class="s1">pygame</span><span class="s2">.</span><span class="s1">mixer</span><span class="s2">.</span><span class="s1">init</span><span class="s2">()</span>
<span class="s1">pygame</span><span class="s2">.</span><span class="s1">mixer</span><span class="s2">.</span><span class="s1">music</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s5">&quot;bgmusic.ogg&quot;</span><span class="s2">))</span>
<span class="s1">pygame</span><span class="s2">.</span><span class="s1">mixer</span><span class="s2">.</span><span class="s1">music</span><span class="s2">.</span><span class="s1">set_volume</span><span class="s2">(</span><span class="s4">0.5</span><span class="s2">)</span>
<span class="s1">pygame</span><span class="s2">.</span><span class="s1">mixer</span><span class="s2">.</span><span class="s1">music</span><span class="s2">.</span><span class="s1">play</span><span class="s2">(-</span><span class="s4">1</span><span class="s2">)</span>

<span class="s3"># Colors</span>
<span class="s1">WHITE </span><span class="s2">= (</span><span class="s4">255</span><span class="s2">, </span><span class="s4">255</span><span class="s2">, </span><span class="s4">255</span><span class="s2">)</span>
<span class="s1">BLACK </span><span class="s2">= (</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">)</span>
<span class="s1">BUTTON_COLOR </span><span class="s2">= (</span><span class="s4">100</span><span class="s2">, </span><span class="s4">100</span><span class="s2">, </span><span class="s4">255</span><span class="s2">)</span>
<span class="s1">BUTTON_HOVER_COLOR </span><span class="s2">= (</span><span class="s4">150</span><span class="s2">, </span><span class="s4">150</span><span class="s2">, </span><span class="s4">255</span><span class="s2">)</span>
<span class="s1">GRAY </span><span class="s2">= (</span><span class="s4">200</span><span class="s2">, </span><span class="s4">200</span><span class="s2">, </span><span class="s4">200</span><span class="s2">)</span>
<span class="s1">RED </span><span class="s2">= (</span><span class="s4">255</span><span class="s2">, </span><span class="s4">100</span><span class="s2">, </span><span class="s4">100</span><span class="s2">)</span>

<span class="s3"># Base pair mappings</span>
<span class="s1">BASE_PAIRS </span><span class="s2">= {</span><span class="s5">&quot;A&quot;</span><span class="s2">: </span><span class="s5">&quot;T&quot;</span><span class="s2">, </span><span class="s5">&quot;T&quot;</span><span class="s2">: </span><span class="s5">&quot;A&quot;</span><span class="s2">, </span><span class="s5">&quot;C&quot;</span><span class="s2">: </span><span class="s5">&quot;G&quot;</span><span class="s2">, </span><span class="s5">&quot;G&quot;</span><span class="s2">: </span><span class="s5">&quot;C&quot;</span><span class="s2">}</span>

<span class="s3"># Setup display</span>
<span class="s1">screen </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">display</span><span class="s2">.</span><span class="s1">set_mode</span><span class="s2">((</span><span class="s1">WIDTH</span><span class="s2">, </span><span class="s1">HEIGHT</span><span class="s2">))</span>
<span class="s1">pygame</span><span class="s2">.</span><span class="s1">display</span><span class="s2">.</span><span class="s1">set_caption</span><span class="s2">(</span><span class="s5">&quot;DNA Pizzeria&quot;</span><span class="s2">)</span>
<span class="s1">clock </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">time</span><span class="s2">.</span><span class="s1">Clock</span><span class="s2">()</span>

<span class="s3"># Load font once</span>
<span class="s1">font_main </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">font</span><span class="s2">.</span><span class="s1">Font</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s5">&quot;fonts&quot;</span><span class="s2">, </span><span class="s5">&quot;Ldfcomicsansbold-zgma.ttf&quot;</span><span class="s2">), </span><span class="s4">36</span><span class="s2">)</span>

<span class="s3"># Load assets</span>
<span class="s1">background_startup </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s5">&quot;restaurant.png&quot;</span><span class="s2">))</span>
<span class="s1">logo_image </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s5">&quot;logo.png&quot;</span><span class="s2">))</span>
<span class="s1">logo_rect </span><span class="s2">= </span><span class="s1">logo_image</span><span class="s2">.</span><span class="s1">get_rect</span><span class="s2">(</span><span class="s1">center</span><span class="s2">=(</span><span class="s1">WIDTH </span><span class="s2">// </span><span class="s4">2</span><span class="s2">, </span><span class="s1">HEIGHT </span><span class="s2">// </span><span class="s4">3</span><span class="s2">))</span>

<span class="s1">background_unzip_1 </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s5">&quot;zipped.png&quot;</span><span class="s2">))</span>
<span class="s1">background_unzip_2 </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s5">&quot;unzipped.png&quot;</span><span class="s2">))</span>
<span class="s1">background_build </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s5">&quot;unzipped.png&quot;</span><span class="s2">))</span>

<span class="s1">overlay </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">Surface</span><span class="s2">((</span><span class="s1">WIDTH</span><span class="s2">, </span><span class="s1">HEIGHT</span><span class="s2">), </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">SRCALPHA</span><span class="s2">)</span>
<span class="s1">overlay</span><span class="s2">.</span><span class="s1">fill</span><span class="s2">((</span><span class="s4">255</span><span class="s2">, </span><span class="s4">255</span><span class="s2">, </span><span class="s4">255</span><span class="s2">, </span><span class="s4">128</span><span class="s2">))  </span><span class="s3"># 50% transparent white</span>

<span class="s1">customer_data </span><span class="s2">= {</span>
    <span class="s5">&quot;Pent.S.&quot;</span><span class="s2">: {</span><span class="s5">&quot;delivery_zone&quot;</span><span class="s2">: </span><span class="s5">&quot;3.png&quot;</span><span class="s2">, </span><span class="s5">&quot;background&quot;</span><span class="s2">: </span><span class="s5">&quot;Pent_s_bubble.png&quot;</span><span class="s2">, </span><span class="s5">&quot;delivery_bg&quot;</span><span class="s2">: </span><span class="s5">&quot;Pent_s.png&quot;</span><span class="s2">},</span>
    <span class="s5">&quot;Nitro.B.&quot;</span><span class="s2">: {</span><span class="s5">&quot;delivery_zone&quot;</span><span class="s2">: </span><span class="s5">&quot;1.png&quot;</span><span class="s2">, </span><span class="s5">&quot;background&quot;</span><span class="s2">: </span><span class="s5">&quot;Nitro_b_bubble.png&quot;</span><span class="s2">, </span><span class="s5">&quot;delivery_bg&quot;</span><span class="s2">: </span><span class="s5">&quot;Nitro_b.png&quot;</span><span class="s2">},</span>
    <span class="s5">&quot;Phos.G.&quot;</span><span class="s2">: {</span><span class="s5">&quot;delivery_zone&quot;</span><span class="s2">: </span><span class="s5">&quot;2.png&quot;</span><span class="s2">, </span><span class="s5">&quot;background&quot;</span><span class="s2">: </span><span class="s5">&quot;Phos_g_bubble.png&quot;</span><span class="s2">, </span><span class="s5">&quot;delivery_bg&quot;</span><span class="s2">: </span><span class="s5">&quot;Phos_g.png&quot;</span><span class="s2">}</span>
<span class="s2">}</span>

<span class="s3"># Draggable base class</span>
<span class="s0">class </span><span class="s1">DraggableBase</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">base</span><span class="s2">, </span><span class="s1">pos</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">base </span><span class="s2">= </span><span class="s1">base</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">original_pos </span><span class="s2">= </span><span class="s1">pos</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">rect </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">Rect</span><span class="s2">(</span><span class="s1">pos</span><span class="s2">[</span><span class="s4">0</span><span class="s2">], </span><span class="s1">pos</span><span class="s2">[</span><span class="s4">1</span><span class="s2">], </span><span class="s4">40</span><span class="s2">, </span><span class="s4">40</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">dragging </span><span class="s2">= </span><span class="s0">False</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">offset </span><span class="s2">= (</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">draw</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">surface</span><span class="s2">):</span>
        <span class="s1">pygame</span><span class="s2">.</span><span class="s1">draw</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">(</span><span class="s1">surface</span><span class="s2">, </span><span class="s1">GRAY </span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">)</span>
        <span class="s1">txt_surf </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">base</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">BLACK</span><span class="s2">)</span>
        <span class="s1">txt_rect </span><span class="s2">= </span><span class="s1">txt_surf</span><span class="s2">.</span><span class="s1">get_rect</span><span class="s2">(</span><span class="s1">center</span><span class="s2">=</span><span class="s1">self</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">.</span><span class="s1">center</span><span class="s2">)</span>
        <span class="s1">surface</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">txt_surf</span><span class="s2">, </span><span class="s1">txt_rect</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">reset_position</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">.</span><span class="s1">topleft </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">original_pos</span>

<span class="s3"># Draggable bases (A, T, C, G)</span>
<span class="s1">draggable_bases </span><span class="s2">= []</span>
<span class="s1">base_options </span><span class="s2">= [</span><span class="s5">&quot;A&quot;</span><span class="s2">, </span><span class="s5">&quot;T&quot;</span><span class="s2">, </span><span class="s5">&quot;C&quot;</span><span class="s2">, </span><span class="s5">&quot;G&quot;</span><span class="s2">]</span>
<span class="s0">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">base </span><span class="s0">in </span><span class="s1">enumerate</span><span class="s2">(</span><span class="s1">base_options</span><span class="s2">):</span>
    <span class="s1">x </span><span class="s2">= </span><span class="s4">600</span>
    <span class="s1">y </span><span class="s2">= </span><span class="s4">150 </span><span class="s2">+ </span><span class="s1">i </span><span class="s2">* </span><span class="s4">60</span>
    <span class="s1">draggable_bases</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s1">DraggableBase</span><span class="s2">(</span><span class="s1">base</span><span class="s2">, (</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">)))</span>

<span class="s0">class </span><span class="s1">Customer</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">name</span><span class="s2">, </span><span class="s1">delivery_zone</span><span class="s2">, </span><span class="s1">background</span><span class="s2">, </span><span class="s1">delivery_bg</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">name </span><span class="s2">= </span><span class="s1">name</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">template </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">generate_template</span><span class="s2">()</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">delivery_zone </span><span class="s2">= </span><span class="s1">delivery_zone</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">background </span><span class="s2">= </span><span class="s1">background</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">delivery_bg </span><span class="s2">= </span><span class="s1">delivery_bg</span>

    <span class="s0">def </span><span class="s1">generate_template</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">return </span><span class="s5">''</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">random</span><span class="s2">.</span><span class="s1">choices</span><span class="s2">(</span><span class="s1">list</span><span class="s2">(</span><span class="s1">BASE_PAIRS</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">()), </span><span class="s1">k</span><span class="s2">=</span><span class="s4">8</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">get_complement</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">return </span><span class="s5">''</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">BASE_PAIRS</span><span class="s2">[</span><span class="s1">b</span><span class="s2">] </span><span class="s0">for </span><span class="s1">b </span><span class="s0">in </span><span class="s1">self</span><span class="s2">.</span><span class="s1">template</span><span class="s2">)</span>


<span class="s0">class </span><span class="s1">Pizza</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">player_strand </span><span class="s2">= [</span><span class="s5">&quot;&quot;</span><span class="s2">] * </span><span class="s4">8  </span><span class="s3"># For the player's complementary strand</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">dragging_base </span><span class="s2">= </span><span class="s0">None  </span><span class="s3"># To track which base is being dragged</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">base_positions </span><span class="s2">= [(</span><span class="s4">100 </span><span class="s2">+ </span><span class="s1">i </span><span class="s2">* </span><span class="s4">40</span><span class="s2">, </span><span class="s4">200</span><span class="s2">) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range</span><span class="s2">(</span><span class="s4">8</span><span class="s2">)]  </span><span class="s3"># Target locations for the complementary strand</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">dragged_bases </span><span class="s2">= []  </span><span class="s3"># To track the base pairs to be dragged</span>

    <span class="s0">def </span><span class="s1">create_draggable_bases</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">dragged_bases </span><span class="s2">= [</span>
            <span class="s2">{</span><span class="s5">&quot;letter&quot;</span><span class="s2">: </span><span class="s1">letter</span><span class="s2">, </span><span class="s5">&quot;rect&quot;</span><span class="s2">: </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">Rect</span><span class="s2">(</span><span class="s4">100 </span><span class="s2">+ </span><span class="s1">i </span><span class="s2">* </span><span class="s4">50</span><span class="s2">, </span><span class="s4">300</span><span class="s2">, </span><span class="s4">40</span><span class="s2">, </span><span class="s4">40</span><span class="s2">)}</span>
            <span class="s0">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">letter </span><span class="s0">in </span><span class="s1">enumerate</span><span class="s2">([</span><span class="s5">&quot;A&quot;</span><span class="s2">, </span><span class="s5">&quot;T&quot;</span><span class="s2">, </span><span class="s5">&quot;C&quot;</span><span class="s2">, </span><span class="s5">&quot;G&quot;</span><span class="s2">])</span>
        <span class="s2">]</span>

    <span class="s0">def </span><span class="s1">check_drop</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">mouse_pos</span><span class="s2">):</span>
        <span class="s0">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">base_rect </span><span class="s0">in </span><span class="s1">enumerate</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">dragged_bases</span><span class="s2">):</span>
            <span class="s0">if </span><span class="s1">base_rect</span><span class="s2">[</span><span class="s5">&quot;rect&quot;</span><span class="s2">].</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">mouse_pos</span><span class="s2">):</span>
                <span class="s0">return </span><span class="s1">i  </span><span class="s3"># Return the index of the base being dragged</span>
        <span class="s0">return None</span>

    <span class="s0">def </span><span class="s1">update_base_position</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">base_index</span><span class="s2">, </span><span class="s1">target_position</span><span class="s2">):</span>
        <span class="s1">base </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">dragged_bases</span><span class="s2">[</span><span class="s1">base_index</span><span class="s2">]</span>
        <span class="s1">base</span><span class="s2">[</span><span class="s5">&quot;rect&quot;</span><span class="s2">].</span><span class="s1">topleft </span><span class="s2">= </span><span class="s1">target_position</span>

    <span class="s0">def </span><span class="s1">reset_base_positions</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">for </span><span class="s1">base </span><span class="s0">in </span><span class="s1">self</span><span class="s2">.</span><span class="s1">dragged_bases</span><span class="s2">:</span>
            <span class="s1">base</span><span class="s2">[</span><span class="s5">&quot;rect&quot;</span><span class="s2">].</span><span class="s1">topleft </span><span class="s2">= (</span><span class="s4">100 </span><span class="s2">+ </span><span class="s1">self</span><span class="s2">.</span><span class="s1">dragged_bases</span><span class="s2">.</span><span class="s1">index</span><span class="s2">(</span><span class="s1">base</span><span class="s2">) * </span><span class="s4">50</span><span class="s2">, </span><span class="s4">300</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">draw</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">surface</span><span class="s2">):</span>
        <span class="s0">for </span><span class="s1">base </span><span class="s0">in </span><span class="s1">self</span><span class="s2">.</span><span class="s1">dragged_bases</span><span class="s2">:</span>
            <span class="s1">pygame</span><span class="s2">.</span><span class="s1">draw</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">(</span><span class="s1">surface</span><span class="s2">, (</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">), </span><span class="s1">base</span><span class="s2">[</span><span class="s5">&quot;rect&quot;</span><span class="s2">])  </span><span class="s3"># Draw the base</span>

        <span class="s3"># Draw player strand</span>
        <span class="s0">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">base </span><span class="s0">in </span><span class="s1">enumerate</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">player_strand</span><span class="s2">):</span>
            <span class="s1">base_text </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s1">base </span><span class="s0">if </span><span class="s1">base </span><span class="s0">else </span><span class="s5">&quot;_&quot;</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">BLACK</span><span class="s2">)</span>
            <span class="s1">surface</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">base_text</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">base_positions</span><span class="s2">[</span><span class="s1">i</span><span class="s2">])</span>


<span class="s0">def </span><span class="s1">draw_startup_screen</span><span class="s2">():</span>
    <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">background_startup</span><span class="s2">, (</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">))</span>
    <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">overlay</span><span class="s2">, (</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">))</span>
    <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">logo_image</span><span class="s2">, </span><span class="s1">logo_rect</span><span class="s2">)</span>

    <span class="s1">button_width</span><span class="s2">, </span><span class="s1">button_height </span><span class="s2">= </span><span class="s4">200</span><span class="s2">, </span><span class="s4">50</span>
    <span class="s1">start_button_rect </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">Rect</span><span class="s2">(</span><span class="s1">WIDTH </span><span class="s2">// </span><span class="s4">2 </span><span class="s2">- </span><span class="s1">button_width </span><span class="s2">// </span><span class="s4">2</span><span class="s2">, </span><span class="s1">HEIGHT </span><span class="s2">// </span><span class="s4">2 </span><span class="s2">+ </span><span class="s4">50</span><span class="s2">, </span><span class="s1">button_width</span><span class="s2">, </span><span class="s1">button_height</span><span class="s2">)</span>

    <span class="s1">color </span><span class="s2">= </span><span class="s1">BUTTON_HOVER_COLOR </span><span class="s0">if </span><span class="s1">start_button_rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pos</span><span class="s2">()) </span><span class="s0">else </span><span class="s1">BUTTON_COLOR</span>
    <span class="s1">pygame</span><span class="s2">.</span><span class="s1">draw</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">(</span><span class="s1">screen</span><span class="s2">, </span><span class="s1">color</span><span class="s2">, </span><span class="s1">start_button_rect</span><span class="s2">)</span>

    <span class="s1">button_text </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s5">&quot;Start Game&quot;</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">BLACK</span><span class="s2">)</span>
    <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">button_text</span><span class="s2">, (</span><span class="s1">start_button_rect</span><span class="s2">.</span><span class="s1">x </span><span class="s2">+ (</span><span class="s1">button_width </span><span class="s2">- </span><span class="s1">button_text</span><span class="s2">.</span><span class="s1">get_width</span><span class="s2">()) // </span><span class="s4">2</span><span class="s2">,</span>
                              <span class="s1">start_button_rect</span><span class="s2">.</span><span class="s1">y </span><span class="s2">+ (</span><span class="s1">button_height </span><span class="s2">- </span><span class="s1">button_text</span><span class="s2">.</span><span class="s1">get_height</span><span class="s2">()) // </span><span class="s4">2</span><span class="s2">))</span>

    <span class="s0">if </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pressed</span><span class="s2">()[</span><span class="s4">0</span><span class="s2">] </span><span class="s0">and </span><span class="s1">start_button_rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pos</span><span class="s2">()):</span>
        <span class="s0">global </span><span class="s1">current_station</span>
        <span class="s1">current_station </span><span class="s2">= </span><span class="s1">STATION_TEMPLATE</span>
        <span class="s1">reset_game</span><span class="s2">()</span>


<span class="s0">def </span><span class="s1">draw_station</span><span class="s2">():</span>
    <span class="s0">if </span><span class="s1">current_station </span><span class="s2">== </span><span class="s1">STATION_TEMPLATE</span><span class="s2">:</span>
        <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">station_background_image</span><span class="s2">, (</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">))</span>
    <span class="s0">elif </span><span class="s1">current_station </span><span class="s2">== </span><span class="s1">STATION_UNZIP</span><span class="s2">:</span>
        <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">current_unzip_background</span><span class="s2">, (</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">))</span>
    <span class="s0">elif </span><span class="s1">current_station </span><span class="s2">== </span><span class="s1">STATION_BUILD</span><span class="s2">:</span>
        <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">background_build</span><span class="s2">, (</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">))</span>
    <span class="s0">elif </span><span class="s1">current_station </span><span class="s2">== </span><span class="s1">STATION_DELIVERY</span><span class="s2">:</span>
        <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">delivery_background_image</span><span class="s2">, (</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">))</span>

    <span class="s0">if </span><span class="s1">current_station </span><span class="s2">== </span><span class="s1">STATION_TEMPLATE</span><span class="s2">:</span>
        <span class="s1">draw_template_station</span><span class="s2">()</span>
    <span class="s0">elif </span><span class="s1">current_station </span><span class="s2">== </span><span class="s1">STATION_UNZIP</span><span class="s2">:</span>
        <span class="s1">draw_unzip_station</span><span class="s2">()</span>
    <span class="s0">elif </span><span class="s1">current_station </span><span class="s2">== </span><span class="s1">STATION_BUILD</span><span class="s2">:</span>
        <span class="s1">draw_build_station</span><span class="s2">()</span>
    <span class="s0">elif </span><span class="s1">current_station </span><span class="s2">== </span><span class="s1">STATION_DELIVERY</span><span class="s2">:</span>
        <span class="s1">draw_delivery_station</span><span class="s2">()</span>

    <span class="s1">draw_station_buttons</span><span class="s2">()</span>


<span class="s0">def </span><span class="s1">draw_station_buttons</span><span class="s2">():</span>
    <span class="s1">button_width</span><span class="s2">, </span><span class="s1">button_height </span><span class="s2">= </span><span class="s4">180</span><span class="s2">, </span><span class="s4">50</span>
    <span class="s1">y </span><span class="s2">= </span><span class="s1">HEIGHT </span><span class="s2">- </span><span class="s1">button_height </span><span class="s2">- </span><span class="s4">10</span>
    <span class="s1">buttons </span><span class="s2">= [(</span><span class="s5">&quot;Template&quot;</span><span class="s2">, </span><span class="s1">STATION_TEMPLATE</span><span class="s2">), (</span><span class="s5">&quot;Unzip&quot;</span><span class="s2">, </span><span class="s1">STATION_UNZIP</span><span class="s2">),</span>
               <span class="s2">(</span><span class="s5">&quot;Build&quot;</span><span class="s2">, </span><span class="s1">STATION_BUILD</span><span class="s2">), (</span><span class="s5">&quot;Delivery&quot;</span><span class="s2">, </span><span class="s1">STATION_DELIVERY</span><span class="s2">)]</span>

    <span class="s0">for </span><span class="s1">i</span><span class="s2">, (</span><span class="s1">text</span><span class="s2">, </span><span class="s1">station</span><span class="s2">) </span><span class="s0">in </span><span class="s1">enumerate</span><span class="s2">(</span><span class="s1">buttons</span><span class="s2">):</span>
        <span class="s1">x </span><span class="s2">= </span><span class="s1">i </span><span class="s2">* (</span><span class="s1">button_width </span><span class="s2">+ </span><span class="s4">10</span><span class="s2">) + </span><span class="s4">10</span>
        <span class="s1">rect </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">Rect</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">, </span><span class="s1">button_width</span><span class="s2">, </span><span class="s1">button_height</span><span class="s2">)</span>
        <span class="s1">color </span><span class="s2">= </span><span class="s1">BUTTON_HOVER_COLOR </span><span class="s0">if </span><span class="s1">rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pos</span><span class="s2">()) </span><span class="s0">else </span><span class="s1">BUTTON_COLOR</span>
        <span class="s1">pygame</span><span class="s2">.</span><span class="s1">draw</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">(</span><span class="s1">screen</span><span class="s2">, </span><span class="s1">color</span><span class="s2">, </span><span class="s1">rect</span><span class="s2">)</span>

        <span class="s1">txt </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">BLACK</span><span class="s2">)</span>
        <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">txt</span><span class="s2">, (</span><span class="s1">x </span><span class="s2">+ (</span><span class="s1">button_width </span><span class="s2">- </span><span class="s1">txt</span><span class="s2">.</span><span class="s1">get_width</span><span class="s2">()) // </span><span class="s4">2</span><span class="s2">, </span><span class="s1">y </span><span class="s2">+ (</span><span class="s1">button_height </span><span class="s2">- </span><span class="s1">txt</span><span class="s2">.</span><span class="s1">get_height</span><span class="s2">()) // </span><span class="s4">2</span><span class="s2">))</span>

        <span class="s0">if </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pressed</span><span class="s2">()[</span><span class="s4">0</span><span class="s2">] </span><span class="s0">and </span><span class="s1">rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pos</span><span class="s2">()):</span>
            <span class="s0">global </span><span class="s1">current_station</span>
            <span class="s1">current_station </span><span class="s2">= </span><span class="s1">station</span>
            <span class="s1">update_backgrounds</span><span class="s2">()</span>


<span class="s0">def </span><span class="s1">draw_template_station</span><span class="s2">():</span>
    <span class="s1">template_text </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s5">f&quot;Can I get </span><span class="s0">{</span><span class="s1">current_customer</span><span class="s2">.</span><span class="s1">template</span><span class="s0">}</span><span class="s5">&quot;</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">BLACK</span><span class="s2">)</span>
    <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">template_text</span><span class="s2">, (</span><span class="s4">150</span><span class="s2">, </span><span class="s4">50</span><span class="s2">))</span>


<span class="s0">def </span><span class="s1">draw_unzip_station</span><span class="s2">():</span>
    <span class="s1">button_width</span><span class="s2">, </span><span class="s1">button_height </span><span class="s2">= </span><span class="s4">50</span><span class="s2">, </span><span class="s4">300</span>
    <span class="s1">button_rect </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">Rect</span><span class="s2">(</span><span class="s1">WIDTH </span><span class="s2">// </span><span class="s4">7 </span><span class="s2">- </span><span class="s1">button_width </span><span class="s2">// </span><span class="s4">1</span><span class="s2">, </span><span class="s1">HEIGHT </span><span class="s2">// </span><span class="s4">6</span><span class="s2">, </span><span class="s1">button_width</span><span class="s2">, </span><span class="s1">button_height</span><span class="s2">)</span>
    <span class="s1">color </span><span class="s2">= (</span><span class="s4">139</span><span class="s2">, </span><span class="s4">69</span><span class="s2">, </span><span class="s4">19</span><span class="s2">) </span><span class="s0">if </span><span class="s1">button_rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pos</span><span class="s2">()) </span><span class="s0">else </span><span class="s2">(</span><span class="s4">160</span><span class="s2">, </span><span class="s4">82</span><span class="s2">, </span><span class="s4">45</span><span class="s2">)</span>
    <span class="s1">pygame</span><span class="s2">.</span><span class="s1">draw</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">(</span><span class="s1">screen</span><span class="s2">, </span><span class="s1">color</span><span class="s2">, </span><span class="s1">button_rect</span><span class="s2">)</span>

    <span class="s1">button_text </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s5">&quot; &quot;</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">BLACK</span><span class="s2">)</span>
    <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">button_text</span><span class="s2">, (</span><span class="s1">button_rect</span><span class="s2">.</span><span class="s1">x </span><span class="s2">+ (</span><span class="s1">button_width </span><span class="s2">- </span><span class="s1">button_text</span><span class="s2">.</span><span class="s1">get_width</span><span class="s2">()) // </span><span class="s4">2</span><span class="s2">,</span>
                              <span class="s1">button_rect</span><span class="s2">.</span><span class="s1">y </span><span class="s2">+ (</span><span class="s1">button_height </span><span class="s2">- </span><span class="s1">button_text</span><span class="s2">.</span><span class="s1">get_height</span><span class="s2">()) // </span><span class="s4">2</span><span class="s2">))</span>

    <span class="s0">if </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pressed</span><span class="s2">()[</span><span class="s4">0</span><span class="s2">] </span><span class="s0">and </span><span class="s1">button_rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pos</span><span class="s2">()):</span>
        <span class="s0">global </span><span class="s1">current_unzip_background</span>
        <span class="s1">current_unzip_background </span><span class="s2">= </span><span class="s1">background_unzip_2</span>


<span class="s0">def </span><span class="s1">draw_build_station</span><span class="s2">():</span>
    <span class="s3"># Template strand</span>
    <span class="s0">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">base </span><span class="s0">in </span><span class="s1">enumerate</span><span class="s2">(</span><span class="s1">current_customer</span><span class="s2">.</span><span class="s1">template</span><span class="s2">):</span>
        <span class="s1">base_surf </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s1">base</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">RED</span><span class="s2">)</span>
        <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">base_surf</span><span class="s2">, (</span><span class="s1">WIDTH </span><span class="s2">// </span><span class="s4">2 </span><span class="s2">- </span><span class="s4">100</span><span class="s2">, </span><span class="s4">150 </span><span class="s2">+ </span><span class="s1">i </span><span class="s2">* </span><span class="s4">40</span><span class="s2">))</span>

    <span class="s3"># Player's strand</span>
    <span class="s0">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">base </span><span class="s0">in </span><span class="s1">enumerate</span><span class="s2">(</span><span class="s1">pizza</span><span class="s2">.</span><span class="s1">player_strand</span><span class="s2">):</span>
        <span class="s1">char </span><span class="s2">= </span><span class="s1">base </span><span class="s0">if </span><span class="s1">base </span><span class="s0">else </span><span class="s5">&quot;_&quot;</span>
        <span class="s1">base_surf </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s1">char</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">WHITE</span><span class="s2">)</span>
        <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">base_surf</span><span class="s2">, (</span><span class="s1">WIDTH</span><span class="s2">//</span><span class="s4">2 </span><span class="s2">+ </span><span class="s4">100</span><span class="s2">, </span><span class="s4">150 </span><span class="s2">+ </span><span class="s1">i </span><span class="s2">* </span><span class="s4">40</span><span class="s2">))</span>

    <span class="s3"># Draggable bases</span>
    <span class="s0">for </span><span class="s1">base </span><span class="s0">in </span><span class="s1">draggable_bases</span><span class="s2">:</span>
        <span class="s1">base</span><span class="s2">.</span><span class="s1">draw</span><span class="s2">(</span><span class="s1">screen</span><span class="s2">)</span>


<span class="s0">def </span><span class="s1">draw_delivery_station</span><span class="s2">():</span>
    <span class="s1">screen</span><span class="s2">.</span><span class="s1">fill</span><span class="s2">(</span><span class="s1">WHITE</span><span class="s2">)</span>

    <span class="s1">correct_strand </span><span class="s2">= </span><span class="s1">current_customer</span><span class="s2">.</span><span class="s1">get_complement</span><span class="s2">()</span>
    <span class="s1">player_strand </span><span class="s2">= </span><span class="s5">''</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">pizza</span><span class="s2">.</span><span class="s1">player_strand</span><span class="s2">)</span>

    <span class="s0">if </span><span class="s1">player_strand </span><span class="s2">== </span><span class="s1">correct_strand</span><span class="s2">:</span>
        <span class="s1">review_text </span><span class="s2">= </span><span class="s5">&quot;Great Job! Customer is happy! Perfect!&quot;</span>
    <span class="s0">else</span><span class="s2">:</span>
        <span class="s1">review_text </span><span class="s2">= </span><span class="s5">&quot;Customer is upset! They got a weird Pizza?&quot;</span>

    <span class="s1">review_surface </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s1">review_text</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">BLACK</span><span class="s2">)</span>
    <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">review_surface</span><span class="s2">, (</span><span class="s1">WIDTH </span><span class="s2">// </span><span class="s4">2 </span><span class="s2">- </span><span class="s1">review_surface</span><span class="s2">.</span><span class="s1">get_width</span><span class="s2">() // </span><span class="s4">2</span><span class="s2">, </span><span class="s1">HEIGHT </span><span class="s2">// </span><span class="s4">2 </span><span class="s2">- </span><span class="s4">50</span><span class="s2">))</span>

    <span class="s3"># Draw &quot;Next Customer&quot; button</span>
    <span class="s1">button_width</span><span class="s2">, </span><span class="s1">button_height </span><span class="s2">= </span><span class="s4">250</span><span class="s2">, </span><span class="s4">60</span>
    <span class="s1">next_button_rect </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">Rect</span><span class="s2">(</span><span class="s1">WIDTH </span><span class="s2">// </span><span class="s4">2 </span><span class="s2">- </span><span class="s1">button_width </span><span class="s2">// </span><span class="s4">2</span><span class="s2">, </span><span class="s1">HEIGHT </span><span class="s2">// </span><span class="s4">2 </span><span class="s2">+ </span><span class="s4">50</span><span class="s2">, </span><span class="s1">button_width</span><span class="s2">, </span><span class="s1">button_height</span><span class="s2">)</span>

    <span class="s1">color </span><span class="s2">= </span><span class="s1">BUTTON_HOVER_COLOR </span><span class="s0">if </span><span class="s1">next_button_rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pos</span><span class="s2">()) </span><span class="s0">else </span><span class="s1">BUTTON_COLOR</span>
    <span class="s1">pygame</span><span class="s2">.</span><span class="s1">draw</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">(</span><span class="s1">screen</span><span class="s2">, </span><span class="s1">color</span><span class="s2">, </span><span class="s1">next_button_rect</span><span class="s2">)</span>

    <span class="s1">button_text </span><span class="s2">= </span><span class="s1">font_main</span><span class="s2">.</span><span class="s1">render</span><span class="s2">(</span><span class="s5">&quot;Next Customer&quot;</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s1">BLACK</span><span class="s2">)</span>
    <span class="s1">screen</span><span class="s2">.</span><span class="s1">blit</span><span class="s2">(</span><span class="s1">button_text</span><span class="s2">, (</span><span class="s1">next_button_rect</span><span class="s2">.</span><span class="s1">x </span><span class="s2">+ (</span><span class="s1">button_width </span><span class="s2">- </span><span class="s1">button_text</span><span class="s2">.</span><span class="s1">get_width</span><span class="s2">()) // </span><span class="s4">2</span><span class="s2">,</span>
                              <span class="s1">next_button_rect</span><span class="s2">.</span><span class="s1">y </span><span class="s2">+ (</span><span class="s1">button_height </span><span class="s2">- </span><span class="s1">button_text</span><span class="s2">.</span><span class="s1">get_height</span><span class="s2">()) // </span><span class="s4">2</span><span class="s2">))</span>

    <span class="s3"># Handle button click</span>
    <span class="s0">if </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pressed</span><span class="s2">()[</span><span class="s4">0</span><span class="s2">] </span><span class="s0">and </span><span class="s1">next_button_rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">get_pos</span><span class="s2">()):</span>
        <span class="s1">reset_game</span><span class="s2">()</span>


<span class="s0">def </span><span class="s1">reset_game</span><span class="s2">():</span>
    <span class="s1">pizza</span><span class="s2">.</span><span class="s1">player_strand </span><span class="s2">= [</span><span class="s5">&quot;&quot;</span><span class="s2">] * </span><span class="s4">8</span>
    <span class="s0">global </span><span class="s1">current_customer</span><span class="s2">, </span><span class="s1">delivery_zone_image</span><span class="s2">, </span><span class="s1">station_background_image</span><span class="s2">, </span><span class="s1">delivery_background_image</span>
    <span class="s1">current_customer_name </span><span class="s2">= </span><span class="s1">random</span><span class="s2">.</span><span class="s1">choice</span><span class="s2">(</span><span class="s1">list</span><span class="s2">(</span><span class="s1">customer_data</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">()))</span>
    <span class="s1">info </span><span class="s2">= </span><span class="s1">customer_data</span><span class="s2">[</span><span class="s1">current_customer_name</span><span class="s2">]</span>
    <span class="s1">current_customer </span><span class="s2">= </span><span class="s1">Customer</span><span class="s2">(</span><span class="s1">current_customer_name</span><span class="s2">, </span><span class="s1">info</span><span class="s2">[</span><span class="s5">&quot;delivery_zone&quot;</span><span class="s2">], </span><span class="s1">info</span><span class="s2">[</span><span class="s5">&quot;background&quot;</span><span class="s2">], </span><span class="s1">info</span><span class="s2">[</span><span class="s5">&quot;delivery_bg&quot;</span><span class="s2">])</span>
    <span class="s1">station_background_image </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s1">current_customer</span><span class="s2">.</span><span class="s1">background</span><span class="s2">))</span>
    <span class="s1">delivery_background_image </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s1">current_customer</span><span class="s2">.</span><span class="s1">delivery_bg</span><span class="s2">))</span>
    <span class="s0">global </span><span class="s1">current_station</span><span class="s2">, </span><span class="s1">current_unzip_background</span>
    <span class="s1">current_station </span><span class="s2">= </span><span class="s1">STATION_TEMPLATE</span>
    <span class="s1">current_unzip_background </span><span class="s2">= </span><span class="s1">background_unzip_1</span>


<span class="s0">def </span><span class="s1">update_backgrounds</span><span class="s2">():</span>
    <span class="s0">global </span><span class="s1">station_background_image</span><span class="s2">, </span><span class="s1">delivery_background_image</span>
    <span class="s1">info </span><span class="s2">= </span><span class="s1">customer_data</span><span class="s2">[</span><span class="s1">current_customer</span><span class="s2">.</span><span class="s1">name</span><span class="s2">]</span>
    <span class="s1">station_background_image </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">[</span><span class="s5">&quot;background&quot;</span><span class="s2">]))</span>
    <span class="s1">delivery_background_image </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">image</span><span class="s2">.</span><span class="s1">load</span><span class="s2">(</span><span class="s1">join</span><span class="s2">(</span><span class="s5">&quot;assets&quot;</span><span class="s2">, </span><span class="s1">info</span><span class="s2">[</span><span class="s5">&quot;delivery_bg&quot;</span><span class="s2">]))</span>


<span class="s3"># Initialize game state</span>
<span class="s1">current_station </span><span class="s2">= </span><span class="s1">STARTUP_SCREEN</span>
<span class="s1">pizza </span><span class="s2">= </span><span class="s1">Pizza</span><span class="s2">()</span>
<span class="s1">product </span><span class="s2">= </span><span class="s0">None  </span><span class="s3"># Not used in Build Station yet</span>


<span class="s3"># Game Loop</span>
<span class="s0">def </span><span class="s1">main</span><span class="s2">():</span>
    <span class="s1">running </span><span class="s2">= </span><span class="s0">True</span>
    <span class="s0">while </span><span class="s1">running</span><span class="s2">:</span>
        <span class="s1">clock</span><span class="s2">.</span><span class="s1">tick</span><span class="s2">(</span><span class="s1">FPS</span><span class="s2">)</span>
        <span class="s0">for </span><span class="s1">event </span><span class="s0">in </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">event</span><span class="s2">.</span><span class="s1">get</span><span class="s2">():</span>
            <span class="s0">if </span><span class="s1">event</span><span class="s2">.</span><span class="s1">type </span><span class="s2">== </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">QUIT</span><span class="s2">:</span>
                <span class="s1">running </span><span class="s2">= </span><span class="s0">False</span>

            <span class="s3"># Handle mouse events for draggable bases</span>
            <span class="s0">if </span><span class="s1">event</span><span class="s2">.</span><span class="s1">type </span><span class="s2">== </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">MOUSEBUTTONDOWN</span><span class="s2">:</span>
                <span class="s1">pos </span><span class="s2">= </span><span class="s1">event</span><span class="s2">.</span><span class="s1">pos</span>
                <span class="s0">for </span><span class="s1">base </span><span class="s0">in </span><span class="s1">draggable_bases</span><span class="s2">:</span>
                    <span class="s0">if </span><span class="s1">base</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">pos</span><span class="s2">):</span>
                        <span class="s1">base</span><span class="s2">.</span><span class="s1">dragging </span><span class="s2">= </span><span class="s0">True</span>
                        <span class="s1">mouse_x</span><span class="s2">, </span><span class="s1">mouse_y </span><span class="s2">= </span><span class="s1">pos</span>
                        <span class="s1">offset_x </span><span class="s2">= </span><span class="s1">base</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">.</span><span class="s1">x </span><span class="s2">- </span><span class="s1">mouse_x</span>
                        <span class="s1">offset_y </span><span class="s2">= </span><span class="s1">base</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">.</span><span class="s1">y </span><span class="s2">- </span><span class="s1">mouse_y</span>
                        <span class="s1">base</span><span class="s2">.</span><span class="s1">offset </span><span class="s2">= (</span><span class="s1">offset_x</span><span class="s2">, </span><span class="s1">offset_y</span><span class="s2">)</span>

            <span class="s0">elif </span><span class="s1">event</span><span class="s2">.</span><span class="s1">type </span><span class="s2">== </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">MOUSEBUTTONUP</span><span class="s2">:</span>
                <span class="s1">pos </span><span class="s2">= </span><span class="s1">event</span><span class="s2">.</span><span class="s1">pos</span>
                <span class="s0">for </span><span class="s1">base </span><span class="s0">in </span><span class="s1">draggable_bases</span><span class="s2">:</span>
                    <span class="s0">if </span><span class="s1">base</span><span class="s2">.</span><span class="s1">dragging</span><span class="s2">:</span>
                        <span class="s1">base</span><span class="s2">.</span><span class="s1">dragging </span><span class="s2">= </span><span class="s0">False</span>
                        <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range</span><span class="s2">(</span><span class="s1">len</span><span class="s2">(</span><span class="s1">pizza</span><span class="s2">.</span><span class="s1">player_strand</span><span class="s2">)):</span>
                            <span class="s1">slot_rect </span><span class="s2">= </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">Rect</span><span class="s2">(</span><span class="s1">WIDTH </span><span class="s2">// </span><span class="s4">2 </span><span class="s2">+ </span><span class="s4">100</span><span class="s2">, </span><span class="s4">150 </span><span class="s2">+ </span><span class="s1">i </span><span class="s2">* </span><span class="s4">40</span><span class="s2">, </span><span class="s4">30</span><span class="s2">, </span><span class="s4">30</span><span class="s2">)</span>
                            <span class="s0">if </span><span class="s1">slot_rect</span><span class="s2">.</span><span class="s1">collidepoint</span><span class="s2">(</span><span class="s1">base</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">.</span><span class="s1">center</span><span class="s2">):</span>
                                <span class="s1">pizza</span><span class="s2">.</span><span class="s1">player_strand</span><span class="s2">[</span><span class="s1">i</span><span class="s2">] = </span><span class="s1">base</span><span class="s2">.</span><span class="s1">base</span>
                                <span class="s0">break</span>
                        <span class="s1">base</span><span class="s2">.</span><span class="s1">reset_position</span><span class="s2">()</span>

            <span class="s0">elif </span><span class="s1">event</span><span class="s2">.</span><span class="s1">type </span><span class="s2">== </span><span class="s1">pygame</span><span class="s2">.</span><span class="s1">MOUSEMOTION</span><span class="s2">:</span>
                <span class="s1">pos </span><span class="s2">= </span><span class="s1">event</span><span class="s2">.</span><span class="s1">pos</span>
                <span class="s0">for </span><span class="s1">base </span><span class="s0">in </span><span class="s1">draggable_bases</span><span class="s2">:</span>
                    <span class="s0">if </span><span class="s1">base</span><span class="s2">.</span><span class="s1">dragging</span><span class="s2">:</span>
                        <span class="s1">base</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">.</span><span class="s1">x </span><span class="s2">= </span><span class="s1">pos</span><span class="s2">[</span><span class="s4">0</span><span class="s2">] + </span><span class="s1">base</span><span class="s2">.</span><span class="s1">offset</span><span class="s2">[</span><span class="s4">0</span><span class="s2">]</span>
                        <span class="s1">base</span><span class="s2">.</span><span class="s1">rect</span><span class="s2">.</span><span class="s1">y </span><span class="s2">= </span><span class="s1">pos</span><span class="s2">[</span><span class="s4">1</span><span class="s2">] + </span><span class="s1">base</span><span class="s2">.</span><span class="s1">offset</span><span class="s2">[</span><span class="s4">1</span><span class="s2">]</span>

        <span class="s0">if </span><span class="s1">current_station </span><span class="s2">== </span><span class="s1">STARTUP_SCREEN</span><span class="s2">:</span>
            <span class="s1">draw_startup_screen</span><span class="s2">()</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">draw_station</span><span class="s2">()</span>

        <span class="s1">pygame</span><span class="s2">.</span><span class="s1">display</span><span class="s2">.</span><span class="s1">flip</span><span class="s2">()</span>

    <span class="s1">pygame</span><span class="s2">.</span><span class="s1">quit</span><span class="s2">()</span>


<span class="s0">if </span><span class="s1">__name__ </span><span class="s2">== </span><span class="s5">&quot;__main__&quot;</span><span class="s2">:</span>
    <span class="s1">main</span><span class="s2">()</span>
</pre>
</body>
</html>